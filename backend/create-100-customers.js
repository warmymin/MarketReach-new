const axios = require('axios');

const API_BASE_URL = 'http://localhost:8083/api';

// í•œêµ­ ì´ë¦„ ë°ì´í„° (ê¸°ì¡´ + ì¶”ê°€)
const KOREAN_NAMES = [
    "ê¹€ì² ìˆ˜", "ì´ì˜í¬", "ë°•ë¯¼ìˆ˜", "ì •ìˆ˜ì§„", "ìµœë™ìš±", "í•œë¯¸ì˜", "ì†¡íƒœí˜¸", "ìœ¤ì§€ì˜", "ê°•í˜„ìš°", "ì„ì„œì—°",
    "ì¡°ì„±ë¯¼", "ë°±ì§€ì›", "ì˜¤ìŠ¹í˜¸", "ì‹ í˜œì§„", "ìœ ì¬ì„", "ì „ì§€í˜„", "ë‚¨ê¶ë¯¼", "ì„œì˜ˆì§„", "ê¶Œì§€ìš©", "ë°°ìˆ˜ì§€",
    "í™ê¸¸ë™", "ê¹€ì˜ìˆ˜", "ì´ë¯¸ë¼", "ë°•ì¤€í˜¸", "ì •ë‹¤ì€", "ìµœë¯¼í˜¸", "í•œì†Œí¬", "ì†¡ì¤‘ê¸°", "ìœ¤ì•„", "ê°•ë™ì›",
    "ì„ì‹œí˜„", "ì¡°ì¸ì„±", "ë°±ì¢…ì›", "ì˜¤ì •ì—°", "ì‹ ë™ì—½", "ì „ë„ì—°", "ë‚¨ìƒë¯¸", "ì„œê°•ì¤€", "ê¶Œìƒìš°", "ë°°ë‘ë‚˜",
    "í™ì„ì²œ", "ê¹€íƒœí¬", "ì´ë³‘í—Œ", "ë°•ë³´ì˜", "ì •ìš°ì„±", "ìµœì§€ìš°", "í•œê°€ì¸", "ì†¡í˜œêµ", "ìœ¤ê³„ìƒ", "ê°•ì†Œë¼",
    // ì¶”ê°€ ì´ë¦„ë“¤
    "ê¹€ë¯¼ì¤€", "ì´ì„œì—°", "ë°•ì§€í›ˆ", "ì •ìˆ˜ë¹ˆ", "ìµœì¤€í˜¸", "í•œì§€ë¯¼", "ì†¡ë¯¼ì¬", "ìœ¤ì„œì˜", "ê°•í˜„ì¤€", "ì„ë‹¤ì€",
    "ì¡°ìš°ì§„", "ë°±ì„œí˜„", "ì˜¤ë¯¼ì„", "ì‹ ì§€ì›", "ìœ ì„œì§„", "ì „í˜„ìš°", "ë‚¨ì§€ì€", "ì„œì¤€ì˜", "ê¶Œì„œì—°", "ë°°ë¯¼ì¬",
    "í™ì§€í˜„", "ê¹€í˜„ìš°", "ì´ì¤€í˜¸", "ë°•ì„œì˜", "ì •ë¯¼ì¬", "ìµœì§€ì€", "í•œí˜„ì¤€", "ì†¡ì„œì—°", "ìœ¤ë¯¼ì¬", "ê°•ì§€í˜„",
    "ì„í˜„ìš°", "ì¡°ì¤€í˜¸", "ë°±ì„œì˜", "ì˜¤ë¯¼ì¬", "ì‹ ì§€ì€", "ìœ í˜„ì¤€", "ì „ì„œì—°", "ë‚¨ë¯¼ì¬", "ì„œì§€í˜„", "ê¶Œí˜„ìš°",
    "ë°°ì¤€í˜¸", "í™ì„œì˜", "ê¹€ë¯¼ì¬", "ì´ì§€ì€", "ë°•í˜„ì¤€", "ì •ì„œì—°", "ìµœë¯¼ì¬", "í•œì§€í˜„", "ì†¡í˜„ìš°", "ìœ¤ì¤€í˜¸",
    "ê°•ì„œì˜", "ì„ë¯¼ì¬", "ì¡°ì§€ì€", "ë°±í˜„ì¤€", "ì˜¤ì„œì—°", "ì‹ ë¯¼ì¬", "ìœ ì§€í˜„", "ì „í˜„ìš°", "ë‚¨ì¤€í˜¸", "ì„œì„œì˜",
    "ê¶Œë¯¼ì¬", "ë°°ì§€ì€", "í™í˜„ì¤€", "ê¹€ì„œì—°", "ì´ë¯¼ì¬", "ë°•ì§€í˜„", "ì •í˜„ìš°", "ìµœì¤€í˜¸", "í•œì„œì˜", "ì†¡ë¯¼ì¬",
    "ìœ¤ì§€ì€", "ê°•í˜„ì¤€", "ì„ì„œì—°", "ì¡°ë¯¼ì¬", "ë°±ì§€í˜„", "ì˜¤í˜„ìš°", "ì‹ ì¤€í˜¸", "ìœ ì„œì˜", "ì „ë¯¼ì¬", "ë‚¨ì§€ì€",
    "ì„œí˜„ì¤€", "ê¶Œì„œì—°", "ë°°ë¯¼ì¬", "í™ì§€í˜„", "ê¹€í˜„ìš°", "ì´ì¤€í˜¸", "ë°•ì„œì˜", "ì •ë¯¼ì¬", "ìµœì§€ì€", "í•œí˜„ì¤€"
];

// ì„œìš¸ì‹œ í–‰ì •êµ¬ì—­ ì½”ë“œ (ë™ ë‹¨ìœ„) - ë” ë§ì€ ì§€ì—­ ì¶”ê°€
const DONG_CODES = [
    // ê°•ë‚¨êµ¬
    "1168010100", "1168010200", "1168010300", "1168010400", "1168010500",
    "1168010600", "1168010700", "1168010800", "1168010900", "1168011000",
    "1168051000", "1168052000", "1168053000", "1168054000", "1168055000",
    "1168056000", "1168057000", "1168058000", "1168059000", "1168060000",
    // ê°•ì„œêµ¬
    "1144010100", "1144010200", "1144010300", "1144010400", "1144010500",
    "1144010600", "1144010700", "1144010800", "1144010900", "1144011000",
    "1144066000", "1144067000", "1144068000", "1144069000", "1144070000",
    "1144071000", "1144072000", "1144073000", "1144074000", "1144075000",
    // ê°•ë¶êµ¬
    "1150010100", "1150010200", "1150010300", "1150010400", "1150010500",
    "1150010600", "1150010700", "1150010800", "1150010900", "1150011000",
    "1150066000", "1150067000", "1150068000", "1150069000", "1150070000",
    "1150071000", "1150072000", "1150073000", "1150074000", "1150075000",
    // ì„œì´ˆêµ¬
    "1165010100", "1165010200", "1165010300", "1165010400", "1165010500",
    "1165010600", "1165010700", "1165010800", "1165010900", "1165011000",
    "1165066000", "1165067000", "1165068000", "1165069000", "1165070000",
    // ë§ˆí¬êµ¬
    "1144010100", "1144010200", "1144010300", "1144010400", "1144010500",
    "1144010600", "1144010700", "1144010800", "1144010900", "1144011000",
    "1144066000", "1144067000", "1144068000", "1144069000", "1144070000",
    // ì†¡íŒŒêµ¬
    "1171010100", "1171010200", "1171010300", "1171010400", "1171010500",
    "1171010600", "1171010700", "1171010800", "1171010900", "1171011000",
    "1171066000", "1171067000", "1171068000", "1171069000", "1171070000",
    // ì˜ë“±í¬êµ¬
    "1156010100", "1156010200", "1156010300", "1156010400", "1156010500",
    "1156010600", "1156010700", "1156010800", "1156010900", "1156011000",
    "1156066000", "1156067000", "1156068000", "1156069000", "1156070000"
];

// ì „í™”ë²ˆí˜¸ ì ‘ë‘ì‚¬
const PHONE_PREFIXES = ["010", "011", "016", "017", "018", "019"];

// ì„œìš¸ì‹œ ì£¼ìš” ì§€ì—­ë³„ ì¢Œí‘œ ë²”ìœ„
const SEOUL_REGIONS = [
    { name: "ê°•ë‚¨êµ¬", lat: [37.48, 37.56], lng: [127.02, 127.12] },
    { name: "ê°•ì„œêµ¬", lat: [37.52, 37.58], lng: [126.80, 126.90] },
    { name: "ê°•ë¶êµ¬", lat: [37.58, 37.65], lng: [126.95, 127.05] },
    { name: "ì„œì´ˆêµ¬", lat: [37.45, 37.52], lng: [126.95, 127.05] },
    { name: "ë§ˆí¬êµ¬", lat: [37.52, 37.58], lng: [126.88, 126.98] },
    { name: "ì†¡íŒŒêµ¬", lat: [37.48, 37.56], lng: [127.08, 127.18] },
    { name: "ì˜ë“±í¬êµ¬", lat: [37.50, 37.56], lng: [126.85, 126.95] },
    { name: "ì¤‘êµ¬", lat: [37.55, 37.58], lng: [126.95, 127.05] },
    { name: "ìš©ì‚°êµ¬", lat: [37.52, 37.58], lng: [126.95, 127.05] },
    { name: "ì„±ë™êµ¬", lat: [37.54, 37.58], lng: [127.00, 127.10] }
];

function generateRandomCustomer() {
    // ëœë¤ ì´ë¦„
    const name = KOREAN_NAMES[Math.floor(Math.random() * KOREAN_NAMES.length)];
    
    // ëœë¤ ì „í™”ë²ˆí˜¸
    const prefix = PHONE_PREFIXES[Math.floor(Math.random() * PHONE_PREFIXES.length)];
    const middle = String(Math.floor(Math.random() * 10000)).padStart(4, '0');
    const last = String(Math.floor(Math.random() * 10000)).padStart(4, '0');
    const phone = `${prefix}-${middle}-${last}`;
    
    // ëœë¤ ì§€ì—­ ì„ íƒ
    const region = SEOUL_REGIONS[Math.floor(Math.random() * SEOUL_REGIONS.length)];
    const lat = region.lat[0] + Math.random() * (region.lat[1] - region.lat[0]);
    const lng = region.lng[0] + Math.random() * (region.lng[1] - region.lng[0]);
    
    // ëœë¤ ë™ ì½”ë“œ
    const dongCode = DONG_CODES[Math.floor(Math.random() * DONG_CODES.length)];
    
    return {
        name,
        phone,
        lat: parseFloat(lat.toFixed(6)),
        lng: parseFloat(lng.toFixed(6)),
        dongCode
    };
}

async function createCustomer(customerData) {
    try {
        const response = await axios.post(`${API_BASE_URL}/customers`, customerData);
        console.log(`âœ… ê³ ê° ìƒì„± ì„±ê³µ: ${customerData.name} (${customerData.phone})`);
        return response.data.data.id;
    } catch (error) {
        console.error(`âŒ ê³ ê° ìƒì„± ì‹¤íŒ¨: ${customerData.name}`, error.response?.data || error.message);
        return null;
    }
}

async function create100Customers() {
    console.log('ğŸš€ 100ëª…ì˜ ê³ ê° ë°ì´í„° ìƒì„± ì‹œì‘...\n');

    const customerIds = [];
    const batchSize = 10; // í•œ ë²ˆì— 10ê°œì”© ì²˜ë¦¬

    for (let i = 0; i < 100; i++) {
        const customer = generateRandomCustomer();
        const customerId = await createCustomer(customer);
        
        if (customerId) {
            customerIds.push(customerId);
        }

        // ì§„í–‰ìƒí™© í‘œì‹œ
        if ((i + 1) % batchSize === 0) {
            console.log(`ğŸ“Š ì§„í–‰ìƒí™©: ${i + 1}/100 (${Math.round((i + 1) / 100 * 100)}%)`);
        }

        // API ìš”ì²­ ê°„ê²© ì¡°ì ˆ (ì„œë²„ ë¶€í•˜ ë°©ì§€)
        await new Promise(resolve => setTimeout(resolve, 100));
    }

    console.log('\nğŸ‰ ê³ ê° ë°ì´í„° ìƒì„± ì™„ë£Œ!');
    console.log(`ğŸ“Š ìƒì„±ëœ ê³ ê° ìˆ˜: ${customerIds.length}ëª…`);
    console.log(`ğŸ“Š ì„±ê³µë¥ : ${Math.round(customerIds.length / 100 * 100)}%`);

    return customerIds;
}

// ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
create100Customers().catch(console.error);
